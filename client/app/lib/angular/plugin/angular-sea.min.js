/*! angular-seajs - v0.1.0 - https://github.com/atian25/angular-seajs - 2013-10-18 */
define(function (require, exports, module) {
    "use strict";
    function a() {
        var a = "$routeChangeStart";
        this.init = function (b) {
            a = b || "$routeChangeStart"
        }, this.$get = ["$rootScope", function () {
            return{patchRoute: c(a)}
        }]
    }

    function b(a) {
        return["$q", "$rootScope", function (b, c) {
            var d = b.defer();
            return require.async(a, function (module) {
                c.safeApply(function () {
                    d.resolve(module)
                })
            }), d.promise
        }]
    }

    function c(a) {
        return function (c) {
            c.$on(a, function (a, c) {
                var d = c && c.$$route;
                d && (d.resolve = d.resolve || {}, "string" == typeof d.controllerUrl && (d.resolve.loadBySeajs = b(d.controllerUrl)))
            })
        }
    }

    function d(a) {
        angular.isFunction(a.safeApply) || (a.safeApply = function (a) {
            var b = this.$root.$$phase;
            "$apply" == b || "$digest" == b ? a && "function" == typeof a && a() : this.$apply(a)
        })
    }

    var e = module.exports = angular.module("angular-sea", []);
    e.config(["$controllerProvider", "$compileProvider", "$filterProvider", "$provide", function (b, c, d, e) {
        a.prototype.register = {controller: b.register, directive: c.directive, filter: d.register, factory: e.factory, service: e.service, decorator: e.decorator}, e.provider("sea", a)
    }]).run(["$rootScope", "sea", function (a, b) {
        d(a), b.patchRoute(a)
    }])
});